// Funkcja aktualizująca widok na podstawie danych Z BAZY
    function updateView() {
        const selectedName = localStorage.getItem('selectedUserName');
        
        loadingInfo.classList.add('hidden'); 

        dishes.forEach(dish => {
            const item = document.querySelector(`[data-dish-id="${dish.id}"]`);
            if (!item) return; 

            const checkbox = document.getElementById(`dish-${dish.id}`);
            const reservedSpan = item.querySelector('.reserved-by');
            
            const reservedBy = currentReservations[dish.id]; 

            item.classList.remove('disabled'); // ZAWSZE CZYŚCIMY KLASĘ NA POCZĄTKU
            checkbox.checked = false;
            reservedSpan.textContent = '';
            
            if (reservedBy) {
                // Potrawa jest zarezerwowana
                reservedSpan.textContent = `(${reservedBy})`;
                
                if (reservedBy !== selectedName) {
                    // NOWA LOGIKA BLOKOWANIA: Zarezerwowana przez kogoś innego - BLOKUJEMY
                    item.classList.add('disabled');
                    checkbox.checked = false; // Upewniamy się, że nie jest zaznaczona
                } else {
                    // Zarezerwowana przez aktualnego użytkownika - ZAZNACZAMY
                    checkbox.checked = true;
                }
            }
        });
    }
